@if (items.length !== 0) {
  @for (item of secondaryItems; track item.name) {
    @if ((item.visible$ | async)) {
      @if ((item.hasValue$ | async)) {
        @for (chip of item.chips$ | async; track chip.label) {
          <fs-chip
              class="filter-chip selected"
              [size]="'medium'"
              [borderColor]="'#ddd'"
              [attr.data-filter-item]="item.name"
              [outlined]="true"
              (click)="openChip(item, chip.name)">
            @if (chip.value) {
              {{ chip.label }}:
              <a>
                {{ chip.value }}
              </a>
            } @else {
              {{ chip.label }}
            }
            <ng-template
              fsChipSuffix
              [icon]="'cancel_circle_outline'"
              (click)="removeChip(item, chip)">
            </ng-template>
          </fs-chip>
        }
      }
      @if ((item.notValue$ | async) && (item.secondaryVisible$ | async)) {
        <fs-chip
            class="filter-chip"
            [attr.data-filter-item]="item.name"
            [size]="'medium'"
            [borderColor]="'#ddd'"
            (click)="openChip(item)"
            [outlined]="true">
          {{ item.mergedLabel }}
          <ng-template
            fsChipSuffix
            [icon]="'cancel_circle_outline'"
            (click)="removeItem(item)">
          </ng-template>
        </fs-chip>
      }
    }
  }
  @if (moreFilterItems().length > 0) {
    <mat-select
        class="more-filters-select mat-mdc-button-base"
        [buttonType]="'basic'"
        fsSelectButton
        [disableOptionCentering]="true"
        [panelClass]="'fs-filter-no-initial-focus'"
        [placeholder]="'More filters'"
        (selectionChange)="addFilter($event)"
        [deselectOnChange]="true">
      @for (item of moreFilterItems(); track item.name) {
        <mat-option [value]="item">
          {{ item.mergedLabel }}
        </mat-option>
      }
    </mat-select>
  }
  @if (savedFilterController.enabled) {
    <mat-select
        class="saved-filters-select mat-mdc-button-base"
        [buttonType]="'basic'"
        fsSelectButton
        [placeholder]="(savedFilterController.activeFilter$ | async) ? savedFilterController.singularLabel + ': ' + (savedFilterController.activeFilter$ | async).name : savedFilterController.pluralLabel"
        [deselectOnChange]="true">
      @if (savedFilterController.activeFilter$ | async) {
        <mat-option (click)="saveActiveFilter()">
          Update filters
        </mat-option>
        <mat-option (click)="saveAs()">
          Save as new
        </mat-option>
      } @else {
        <mat-option (click)="createSavedFilter()">
          Create new
        </mat-option>
      }
      <mat-option (click)="manageSavedFilters()">
        View all
      </mat-option>
    </mat-select>
  }
  @if (clearFiltersVisible()) {
    <a
        class="clear"
        mat-button
        color="primary"
        (click)="clear()">
      Clear filters
    </a>
  }
}