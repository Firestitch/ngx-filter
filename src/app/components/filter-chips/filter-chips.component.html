@if (items.length !== 0) {
  @for (item of secondaryItems; track item.name) {
    @if ((item.visible$ | async)) {
      @if ((item.hasValue$ | async)) {
        @for (chip of item.chips$ | async; track chip.label) {
          <fs-chip
              class="filter-chip selected"
              [size]="'medium'"
              [borderColor]="'#ddd'"
              [attr.data-filter-item]="item.name"
              [outlined]="true"
              (click)="openChip(item, chip.name)">
            @if (chip.value) {
              {{ chip.label }}:
              <a>
                {{ chip.value }}
              </a>
            } @else {
              {{ chip.label }}
            }
            <ng-template
              fsChipSuffix
              [icon]="'cancel_circle_outline'"
              (click)="removeChip(item, chip)">
            </ng-template>
          </fs-chip>
        }
      }
      @if ((item.notValue$ | async) && (item.secondaryVisible$ | async)) {
        <fs-chip
            class="filter-chip"
            [attr.data-filter-item]="item.name"
            [size]="'medium'"
            [borderColor]="'#ddd'"
            (click)="openChip(item)"
            [outlined]="true">
          {{ item.mergedLabel }}
          <ng-template
            fsChipSuffix
            [icon]="'add_circle_outline'">
          </ng-template>
        </fs-chip>
      }
    }
  }
  @if (moreFilterItems().length > 0) {
    <fs-chip-select
        [outlined]="true"
        (select)="addFilter($event)">
      <fs-chip-select-trigger>
        More filters
      </fs-chip-select-trigger>
      @for (item of moreFilterItems(); track item.name) {
        <fs-chip-select-option [value]="item">
          {{ item.mergedLabel }}
        </fs-chip-select-option>
      }
    </fs-chip-select>
  }
  @if (savedFilterController.enabled) {
    <fs-chip-select [outlined]="true">
      <fs-chip-select-trigger>
        {{ (savedFilterController.activeFilter$ | async) ? savedFilterController.singularLabel + ': ' + (savedFilterController.activeFilter$ | async).name : savedFilterController.pluralLabel }}
      </fs-chip-select-trigger>
      @if (savedFilterController.activeFilter$ | async) {
        <fs-chip-select-option (click)="saveActiveFilter()">
          Update filters
        </fs-chip-select-option>
        <fs-chip-select-option (click)="saveAs()">
          Save as new
        </fs-chip-select-option>
      } @else {
        <fs-chip-select-option (click)="createSavedFilter()">
          Create new
        </fs-chip-select-option>
      }
      <fs-chip-select-option (click)="manageSavedFilters()">
        View all
      </fs-chip-select-option>
    </fs-chip-select>
  }
  @if (clearFiltersVisible()) {
    <fs-chip
        [outlined]="true"
        (click)="clear()">
      Clear filters
      <ng-template
        fsChipSuffix
        [icon]="'cancel_circle_outline'">
      </ng-template>
    </fs-chip>
  }
}